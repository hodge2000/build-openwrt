; YuanMoon 安全增强版配置
; 主要改进：安全 DNS / 节点命名模糊化 / 规则源保护

dns:
  enable: true
  ipv6: false
  listen: 127.0.0.1:53   # 仅本地监听，避免外部探测
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  default-nameserver:
    - 8.8.8.8
    - 1.1.1.1
  nameserver:
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query
    - https://dns.quad9.net/dns-query
    - https://dns.nextdns.io/xxxxxx   # 可换成你的 NextDNS ID
  fallback:
    - tls://8.8.4.4:853
    - tls://1.0.0.1:853
    - tls://9.9.9.9:853
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

; ==== 分流规则（建议本地缓存）====
; 注意：规则源尽量通过代理下载，或定期手动同步到本地
ruleset=🛑 广告拦截,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/AdBlock/AdBlock.list
ruleset=🍃 应用净化,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Hijacking/Hijacking.list
ruleset=🚀 节点选择,https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@master/meta/geo/geosite/gfw.mrs
ruleset=🎯 全球直连,[]GEOIP,CN,no-resolve
ruleset=🚀 节点选择,[]FINAL,no-resolve

; ==== 节点分组（模糊命名）====
custom_proxy_group=🚀 节点选择 select []♻️ 自动选择 []🚀 手动切换 []Node-HK []Node-JP []Node-US []Node-SG []Node-TW []Node-KR

custom_proxy_group=♻️ 自动选择 url-test ^(?!.*(CN|直连)).*$ http://www.gstatic.com/generate_204 300,,50
custom_proxy_group=🚀 手动切换 fallback .* http://www.gstatic.com/generate_204 300,,50

; 节点地区分组（代号化，避免暴露直白的地理标签）
custom_proxy_group=Node-HK fallback (HK|HongKong) http://www.gstatic.com/generate_204 300,,50
custom_proxy_group=Node-JP fallback (JP|Japan) http://www.gstatic.com/generate_204 300,,50
custom_proxy_group=Node-US fallback (US|UnitedStates) http://www.gstatic.com/generate_204 300,,50
custom_proxy_group=Node-SG fallback (SG|Singapore) http://www.gstatic.com/generate_204 300,,50
custom_proxy_group=Node-TW fallback (TW|Taiwan) http://www.gstatic.com/generate_204 300,,50
custom_proxy_group=Node-KR fallback (KR|Korea) http://www.gstatic.com/generate_204 300,,50

; ==== 特殊服务分流（可按需调整）====
custom_proxy_group=🤖 OpenAI select []🚀 节点选择 []♻️ 自动选择 []Node-SG []Node-JP []Node-US []Node-HK []Node-TW []Node-KR
custom_proxy_group=📲 Telegram select []🚀 节点选择 []♻️ 自动选择 []Node-SG []Node-JP []Node-US []Node-HK []Node-TW []Node-KR
custom_proxy_group=📹 YouTube select []🚀 节点选择 []♻️ 自动选择 []Node-SG []Node-JP []Node-US []Node-HK []Node-TW []Node-KR

; ==== 其他增强 ====
enable_rule_generator: true
overwrite_original_rules: true
